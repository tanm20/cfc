<!DOCTYPE html>
<html>
<head>
<title>Binary quiz</title>
</head>
<body>
<form name="quizform">
<h4>Choose the statement that best describes you</h4>
<ul>
<li><label><input type="radio" name="q1" value="trait1" checked> People see me as a natural leader.</label></li>
<li><label><input type="radio" name="q1" value="trait2"> It's not wise to tell your secrets.</label></li>
<li><label><input type="radio" name="q1" value="trait3"> I like to get revenge on authorities.</label></li>
</ul>

<h4>Choose the statement that best describes you</h4>
<ul>
<li><label><input type="radio" name="q2" value="trait1" checked> I like being the center of attention. </label></li>
<li><label><input type="radio" name="q2" value="trait2"> I like to use clever manipulation to get my way. </label></li>
<li><label><input type="radio" name="q2" value="trait3"> I don't avoid dangerous situations.</label></li>
</ul>

<h4>Choose the statement that best describes you</h4>
<ul>
<li><label><input type="radio" name="q3" value="trait1" checked> Many group activities tend to be full without me.</label></li>
<li><label><input type="radio" name="q3" value="trait2"> Whatever it takes, you must get the important people on your side. </label></li>
<li><label><input type="radio" name="q3" value="trait3"> Payback needs to be quick and nasty.</label></li>
</ul>

<h4>Choose the statement that best describes you</h4>
<ul>
<li><label><input type="radio" name="q4" value="trait1" checked> I know that I am special because everyone keeps telling me so.</label></li>
<li><label><input type="radio" name="q4" value="trait2"> I avoid direct conflict with others because they may be useful in the future. </label></li>
<li><label><input type="radio" name="q4" value="trait3"> People often say I'm out of control.</label></li>
</ul>

<h4>Choose the statement that best describes you</h4>
<ul>
<li><label><input type="radio" name="q5" value="trait1" checked> I like to get acquainted with important people.</label></li>
<li><label><input type="radio" name="q5" value="trait2"> It’s wise to keep track of information that you can use against people later. </label></li>
<li><label><input type="radio" name="q5" value="trait3"> It's true that I can be mean to others.</label></li>
</ul>

<h4>Choose the statement that best describes you</h4>
<ul>
<li><label><input type="radio" name="q6" value="trait1" checked> I don't feel embarrassed if someone compliments me.</label></li>
<li><label><input type="radio" name="q6" value="trait2"> You should wait for the right time to get back at people. </label></li>
<li><label><input type="radio" name="q6" value="trait3"> People who mess with me always regret it.</label></li>
</ul>

<h4>Choose the statement that best describes you</h4>
<ul>
<li><label><input type="radio" name="q7" value="trait1" checked> I have been compared to famous people.</label></li>
<li><label><input type="radio" name="q7" value="trait2"> There are things you should hide from other people because they don’t need to know. </label></li>
<li><label><input type="radio" name="q7" value="trait3"> I have gotten into trouble with the law.</label></li>
</ul>

<h4>Choose the statement that best describes you</h4>
<ul>
<li><label><input type="radio" name="q8" value="trait1" checked> I'm not an average person.</label></li>
<li><label><input type="radio" name="q8" value="trait2"> Make sure your plans benefit you, not others. </label></li>
<li><label><input type="radio" name="q8" value="trait3"> I enjoy having sex with people I hardly know.</label></li>
</ul>

<h4>Choose the statement that best describes you</h4>
<ul>
<li><label><input type="radio" name="q9" value="trait1" checked> I insist on getting the respect I deserve.</label></li>
<li><label><input type="radio" name="q9" value="trait2"> Most people can be manipulated. </label></li>
<li><label><input type="radio" name="q9" value="trait3"> I'll say anything to get what I want.</label></li>
</ul>

<p><button type="submit">Submit</button></p>

<div id="result_div" style="display:none;">
<img id="result_image" alt="">
<p id="result_text"></p>
<p>BBCode:<br>
<textarea rows="3" cols="30" id="result_bbcode"></textarea></p>

<p>HTML:<br>
<textarea rows="3" cols="30" id="result_html"></textarea></p>
</div>
</form>
<script type="text/javascript">
(function() {
    /*************************************************************************
    This should be the full address to your quiz, in order for the result
    codes to link to it.

    *************************************************************************/
    var QUIZ_URL = "/coding_course/cfc/";

    /*************************************************************************
    This should be the full address to whatever folder on your website
    directly contains your result images, ending in a forward slash.

    *************************************************************************/
    var RESULTS_FOLDER_URL = "/coding_course/cfc/results/";

    /*************************************************************************
    The pairs between brackets should be the names of personality traits that
    you use as the value attribute of the answer radio buttons. Each pair
    should consist of two opposite traits, such as extravert and introvert or
    stoic and emotional. You can have any number of trait pairs, although be
    warned that each trait pair doubles the number of results.

    *************************************************************************/
    var TRAIT_PAIRS = [["trait1", "trait2"], ["trait3", "trait3"]];

    /*************************************************************************
    Below, enter the possible final results for your quiz.

    The string inside the brackets should consist of one trait from each of
    the trait pairs defined above, in the order in which they're defined,
    joined by ampersands. Thus, if the trait pairs are ["introvert",
    "extravert"] and ["stoic", "emotional"], your results should be
    "introvert&stoic", "introvert&emotional", "extravert&stoic" and
    "extravert&emotional". You need to include one result for each possible
    combination of traits - that means 2^n results if you have n trait pairs.
    If that seems too much, this may not be the quiz for you.

    Where it says "Result 1", "Result 2", etc., enter the full name of the
    result, such as "Alakazam". Where it says "result_1.jpg", "result_2.jpg",
    etc., enter the filename of the image the user should be presented with if
    they get that result. Where it says "Text for the first result", "Text for
    the second result", etc., enter the text the user should be presented with
    if they get that result. (If you do not want them to get any text with
    their result, you can erase those lines altogether.) Remember to enclose
    these values in quotes.

    It is also possible to leave out the name, image and text and instead add
    a link property, like so:

    RESULTS["introvert&stoic"] = {
        link: "/quiz/alakazam.html"
    };

    If you do this, then the user will be redirected to the link for their
    result when they finish the quiz. The link, like a regular HTML link, can
    be a full URL or an absolute or relative path on your server.

    Optionally, you can add extra results where "both" is used in place of a
    trait in the result identifier, to represent a tie between the two
    extremes. If you don't include a "both" result, the trait that comes first
    in the definition of the trait pairs will take precedence (that is, if
    you have no result for "both&stoic", then a user with a tie between
    introvert and extravert but more stoic than emotional will get the result
    "introvert&stoic" if "introvert" comes before "extravert" in the trait
    pairs).

    *************************************************************************/

    var RESULTS = {};

    RESULTS["trait1&trait3"] = {
        name: "High Narcissism",
        image: "narc.jpeg",
        text: "Individuals who score high on narcissism display grandiosity, entitlement, dominance, and superiority."
    };

    RESULTS["trait1&trait2"] = {
        name: "High Machiavellianism",
        image: "mach.jpeg",
        text: "People who score high on this trait are cynical (in an amoral self-interest sense, not in a doubtful or skeptical sense), unprincipled, believe in interpersonal manipulation as the key for life success, and behave accordingly"
    };

    RESULTS["trait2&trait3"] = {
        name: "High Psychopathy",
        image: "psych.jpg",
        text: "Individuals who score high on psychopathy show low levels of empathy combined with high levels of impulsivity and thrill-seeking"
    };


    /*************************************************************************
    If for some reason you need to give your form a different name attribute
    than "quizform", enter it here. Otherwise, leave this alone.

    *************************************************************************/
    var FORM_NAME = 'quizform';

    /*************************************************************************
    DO NOT EDIT ANYTHING BELOW THIS POINT

    *************************************************************************/

    var form = document.forms[FORM_NAME];
    var form_elements = document.forms[FORM_NAME].elements;
    var form_element;
    var result_div = document.getElementById("result_div");
    var result_image = document.getElementById("result_image");
    var result_text = document.getElementById("result_text");
    var result_bbcode = document.getElementById("result_bbcode");
    var result_html = document.getElementById("result_html");
    var i;

    var traits = {};

    for (i = 0; i < TRAIT_PAIRS.length; i++) {
        if (TRAIT_PAIRS[i].length !== 2) {
            alert("You have more than two traits in a pair. Please ensure that each of the inner sets of square brackets have only two values between them.");
        }
        for (var j = 0; j < 2; j++) {
            traits[TRAIT_PAIRS[i][j]] = true;
        }
    }

    function get_trait_combo(index) {
        var traits = [];
        for (var i = 0; i < TRAIT_PAIRS.length; i++) {
            traits.push(TRAIT_PAIRS[i][(index >> i) % 2]);
        }
        return traits;
    }

    for (i = 0; i < Math.pow(2, TRAIT_PAIRS.length); i++) {
        var result_identifier = get_trait_combo(i).join('&');
        if (!RESULTS[result_identifier]) {
            alert("You have not defined a result for " + result_identifier + ". Please double-check your result definitions.");
        }
    }

    // Validate the quiz form to prevent common issues
    for (i = 0; i < form_elements.length; i++) {
        form_element = form_elements[i];
        if (form_element.type === "radio" || form_element.type === "checkbox") {
            if (form_element.value.indexOf('&') !== -1) {
                alert("Your quiz form has an answer with an ampersand in the value (" + form_element.value + "). This will cause problems. Please change this value.");
            }
            else if (!(form_element.value in traits)) {
                alert("Your quiz form has an answer with the value " + form_element.value + " but this value is not in your trait pairs. You probably made a typo or set your trait pairs up incorrectly.");
            }
        }
    }

    form.onsubmit = function() {
        var answers = {};
        var results = [];
        var first_trait;
        var second_trait;
        var joined_results;
        var result;
        var i;

        for (var trait in traits) {
            answers[trait] = 0;
        }

        for (i = 0; i < form_elements.length; i++) {
            form_element = form_elements[i];
            if ((form_element.type === "radio" || form_element.type === "checkbox") && form_element.checked) {
                answers[form_element.value]++;
            }
        }

        for (i = 0; i < TRAIT_PAIRS.length; i++) {
            first_trait = TRAIT_PAIRS[i][0];
            second_trait = TRAIT_PAIRS[i][1];
            if (answers[first_trait] > answers[second_trait]) {
                results.push(first_trait);
            }
            else if (answers[first_trait] < answers[second_trait]) {
                results.push(second_trait);
            }
            else {
                results.push("both");
            }
        }

        joined_results = results.join('&');
        if (!(joined_results in RESULTS)) {
            // No specific result
            for (var i = 0; i < results.length; i++) {
                if (results[i] === "both") {
                    results[i] = TRAIT_PAIRS[i][0];
                }
            }
            joined_results = results.join('&');
        }
        result = RESULTS[joined_results];

        if (result.link) {
            window.location = result.link;
            return false;
        }

        if (result_image) {
            result_image.src = RESULTS_FOLDER_URL + result.image;
            result_image.setAttribute('alt', result.name);
            if (result.text) result_image.title = result.text;
        }
        if (result_text && result.text) {
            result_text.innerHTML = result.text;
        }
        if (result_bbcode) {
            result_bbcode.innerHTML = '[url=' + QUIZ_URL + '][img]' + RESULTS_FOLDER_URL + result.image + '[/img][/url]';
        }
        if (result_html) {
            result_html.innerHTML = '<a href="' + QUIZ_URL + '"><img src="' + RESULTS_FOLDER_URL + result.image + '" alt="' + result.name + '" title="' + result.text + '"></a>';
        }
        result_div.style.display = 'block';
        return false;
    };
})();

/*************************************************************************
Free quiz script from The Cave of Dragonflies:
http://www.dragonflycave.com/free-quiz-scripts
*************************************************************************/
</script>
</body>
</html>
